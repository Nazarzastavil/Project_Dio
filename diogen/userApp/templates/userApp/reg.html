<!-- tvoya pomoika register_page.html-->

{% extends "mainPage/wrapper.html" %}

{% load static %}

{% block page %}
<link href="https://fonts.googleapis.com/css?family=Open+Sans:800" rel="stylesheet">

<link href="{% static 'css/regchoice.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>

<link href="{% static 'css/regchoice.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
<link rel="stylesheet" href="http://foliotek.github.io/Croppie/croppie.css" />

{{ form.media }}

<body>
        <div class="container">
            <div class="row">

                    
                    <div class="col s4 m4">
                            <figure class="snip1273 deg">
                                    <img src="{% static 'images/tolpa.png' %}" alt="sample72" />
                                    <figcaption>
                                    <h3 style = "color: #ffffff"> Любитель</h3>
                                    <p>Если ты любишь музыку, ищешь новое и неизвестное, то добро пожаловать к нам!</p>
                                    
                                    </figcaption>
                                    <a href="#"></a>
                                </figure>
                    </div> 
            
                    <div class="col s4 m4">
                                <figure class="snip1273 mus">
                                    <img src="{% static 'images/dio.png' %}" alt="sample21" />
                                    <figcaption>
                                            <h3 style = "color: #ffffff"> Творец</h3>
                                    <p>Если ты живешь музыкой, любишь и  создаешь музыку, то добро пожаловать в Мир таких же “вольных” творцов, как и ты!</p>
                                    </figcaption>
                                    <a href="#"></a>
                                </figure>
                    </div>
            
                    <div class="col s4 m4">
                            <figure class="snip1273 org">
                                    <img src="{% static 'images/pub.png' %}" alt="sample86"/>
                                    <figcaption>
                                    <h3 style = "color: #ffffff"> Держатель</h3>
                                    <p>Если вы нуждайтесь в тех, кто скрасит вечер в ваших владениях, заставит трепетать сердца слушателей, то мы поможем их найти! Добро пожаловать!</p>
                                    </figcaption>
                                    <a href="#"></a>
                                </figure>
                </div>
            </div>
        </div>

        <section class="container text">
                <div class="inner">
                        <div class="row flex flex-2 deg">
                                <div class="col col1 s3">
                      
                                </div>        
                                                        
                            <div class="col col2 s6">
                                <form action="{% url 'update_profile' %}" method="post" enctype="multipart/form-data" >
                                        {% csrf_token %}
                                        {% for field in user_form %}
                                        <div class="form-group">
                                                {{field.label_tag}}

                                                <div>{{field}}</div>
                                                <div class="error">{{field.errors}}</div>
                                        </div>
                                        {% endfor %}
                                        <div>
                                        <div class="form-group">
                                            

                                                {{profile_form.birth_date.label_tag}}
                                                {{profile_form.birth_date}}
                                                {{profile_form.adress.label_tag}}
                                                {{profile_form.adress}}
                                                {{profile_form.phone.label_tag}}
                                                {{profile_form.phone}}
                                                {{profile_form.description.label_tag}}
                                                {{profile_form.description}}
                                                {{profile_form.image.label_tag}}
                                                {{profile_form.image}}
                                                <div class="preview"></div>
                                                <div class="error">{{profile_form.errors}}</div>

                                                 
                                        </div>
                                                
                                        <div class="row"></div>
                                        
                                        <div class="row center"> 
                                                <button class='btn-large red'>Я - любитель</button>
                                        </div> 
                                </form>
                                <img class="cropper-result"></img>
                            </div>
                                <div class="col col1 s2">
                                        <!--left banner-->
                                </div>  
                        </div>
                        
                      
                

                </div>
                <div class="inner">
                <div class="row flex flex-2 mus">
                        <div class="col col1 s3">
                        </div>
                        <div class="col col2 s6">
                                <form method="POST">
                                        {% csrf_token %}
                                        {% for field in user_form %}
                                        <div class="form-group">
                                                {{field.label_tag}}

                                                <div>{{field}}</div>
                                                <div class="error">{{field.errors}}</div>
                                        </div>
                                        {% endfor %}

                                        <div class="form-group">
                                                {{profile_form.birth_date.label_tag}}
                                                {{profile_form.birth_date}}
                                                {{profile_form.adress.label_tag}}
                                                {{profile_form.adress}}
                                                {{profile_form.phone.label_tag}}
                                                {{profile_form.phone}}
                                                {{profile_form.description.label_tag}}
                                                {{profile_form.description}}

                                                {{profile_form.nickname.label_tag}}
                                                {{profile_form.nickname}}
                                                {{profile_form.genres.label_tag}}
                                                {{profile_form.genres}}
                                                {{profile_form.instruments.label_tag}}
                                                {{profile_form.instruments}}
                                                {{profile_form.soundcloud.label_tag}}
                                                {{profile_form.soundcloud}}
                                                
                                                {{profile_form.image.label_tag}}
                                                {{profile_form.image}}
                                                <div class="preview"></div>
                                                <!-- <img class="preview"  src="#" style="max-height: 500px; max-width: 500px;" alt="none" /> -->
                                                        <!-- <p>No files currently selected for upload</p> -->
                                                <!-- <div> -->
                                                <!-- <div class="error">{{profile_form.errors}}</div> -->
                                                <div class="row"></div>
                                                <div class="row center"> 
                                                        <button type="submit", class='btn-large red' >Я - музыкант</button>
                                                </div> 
                                        </div>
                                </form>
                        </div>
                </div>
                </div>
                <div class="inner">
                <div class="row flex flex-2 org">
                        <div class="col col1 s3">
                                
                        </div>
                        <div class="col col2 s6">
                                <form method="POST">
                                        {% csrf_token %}
                                        {% for field in user_form %}
                                        <div class="form-group">
                                                {{field.label_tag}}

                                                <div>{{field}}</div>
                                                <div class="error">{{field.errors}}</div>
                                        </div>
                                        {% endfor %}
                                        <div class="form-group">
                                                {{profile_form.adress.label_tag}}
                                                {{profile_form.adress}}
                                                {{profile_form.phone.label_tag}}
                                                {{profile_form.phone}}
                                                {{profile_form.description.label_tag}}
                                                {{profile_form.description}}

                                                {{profile_form.company.label_tag}}
                                                {{profile_form.company}}
                                                
                                                {{profile_form.image.label_tag}}
                                                {{profile_form.image}}
                                                <div class="preview"></div>
                                                <!-- <img class="preview"  src="#" style="max-height: 500px; max-width: 500px;" alt="none" /> -->

                                                
                                                <!-- <div class="error">{{profile_form.errors}}</div> -->
                                                <div class="row"></div>
                                                <div class="row center"> 
                                                        <button type="submit", class='btn-large red'>Я - организация</button>
                                                </div> 
                                        </div>
                                </form>
                        </div>
                </div>
                </div>  
                                    
                            
                                   
                           
               
        </section>

        

      
              
              

    <!--Scripts-->
    <script src="{% static 'js/govno.js' %}"></script>
    <script src="{% static 'js/croppie.js' %}"></script>
    <script>
   


    function readFile(input) {
            $sel = $(input).parent().children('.preview');
            $sel.croppie('destroy');
            $sel.croppie({
                viewport: { width: 250, height: 250, type: 'circle'},
                boundary: { width: 300, height: 300 },
                showZoomer: true,
                
                });
                $sel.on('update.croppie', function() {cropper($sel)})
                if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                                $sel.show();
                                $sel.croppie('bind', {
                                url: e.target.result
                                });
                        }

                reader.readAsDataURL(input.files[0]);
                }
        }
        $(document).ready(function() {$('.preview').hide();});
        $('.avatar').on('change', function () { readFile(this); });
        
        
        function cropper(input) {
                $i = ($(input).parent().children('#id_image'));
                const dt = new DataTransfer()
                $(input).croppie('result', {
                        type: 'blob',
                        size: 'viewport'
                }).then(function (resp) {
                        dt.items.add(new File([resp], "cropped.png"));
                        $i[0].files = dt.files;
                })
                
        }
        


    </script>

</body>
{% endblock %}

